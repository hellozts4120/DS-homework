 分给定序列为合法序列或非法序列的一般准则为：
（1）.若此操作序列从头开始的任一前缀（从头开始连续的任一子串）中，S的个数不小于X的个数，则合法；否则非法。
（2）.若整个操作序列中，S的个数与X的个数相等，则合法；否则非法。

证明：

假设有两个合法序列：A = P1,P2,P3......PJ....
		    B = P1,P2,P3......PJ....
其中：前J个操作均相同，且确保此时栈中剩余的元素不为0。
假设第J + 1个操作不同，设A中操作为S(入栈)，B中X(出栈)，假设此时栈顶的元素为x，即将入栈的元素为y，则在输出序列中，A内x的出现一定晚于B中x元素的出现。因此这两个栈的出栈序列是不同的。
因此，两个不同的合法（栈操作）序列（对同一输入序列）不可能得到相同的输出元素（注意：在此指的是元素实体，而不是值）序列。

